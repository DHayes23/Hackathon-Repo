{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock %}


<!-- CSS Links -->
{% block content %}


<!-- Selects resources that match user level -->


{% if user.is_authenticated %}
    {% if myprofile.role == null %}
    
    <div class="container">
        <div class="row">
            <div class="col-sm-6 offset-sm-3 col-12">
                  <h1 class="profile-form-heading">Hi {{ myprofile.user }}!<br> Please select your role:</h1>
                  <div class="profile-form-container">
                      <form class="profile-form" method="POST" action="{% url 'userprofile' %}">
                          {% csrf_token %}
                          {{ form }}
                          <div class="profile-button-container">
                              <button class="profile-form-button" type="submit">Submit</button>
                          </div>
                      </form>
                  </div>
              </div>
            </div>
          </div>
    {% else %}
        <div>
            <h1 id="user-profile-heading">Hi {{ myprofile.user }}, you are a {{ myprofile.role }}</h1>
        </div>

        <div class="row">
            {% for resource in resources %}
                {% for role in resource.roles.all %}
                    {% if role == myprofile.role %}
                    <div class="col-3">
                        <div class="card user-profile-card" style="width: 18rem;">
                            <div class="card-body">
                              <h5 class="card-title">{{ resource.name }}</h5>
                              <p class="card-text">{{ resource.summary}}</p>
                              <a class="auth-btn" href="{{ resource.link }}" target="_blank" rel="nofolow">Get Started</a>
                            </div>
                          </div>
                    </div>
                    {% endif %}
                {% endfor %}
            {% endfor %}
        </div>
    {% endif %}
{% endif %}

{% endblock %}